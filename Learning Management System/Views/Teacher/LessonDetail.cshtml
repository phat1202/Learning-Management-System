@model List<Learning_Management_System.Models.Lesson>
@inject LmsDbContext db;
@{
    int? lessonId = 1;
    int? number = 0;
    int? selected = 0;
}
<body>
    <script>
        function getLessonId(itemLessonId) {
            $.ajax({
                url: '/Teacher/GetLessonId',
                type: 'POST',
                data: {
                    itemLessonId: itemLessonId,
                },
                success: function (result) {
                    if (result.success) {
                        var lessonContentUrl = result.contentUrl;
                        updateVideo(lessonContentUrl);
                    } else {
                        console.error('Error getting Lesson ID: ' + result.errorMessage);
                    }
                },
                error: function (error) {
                    console.error('Error getting Lesson ID: ' + error.responseText);
                }
            });
        }

        function updateVideo(contentUrl) {
            var videoIframe = document.getElementById('videoIframe');
            if (videoIframe) {
                videoIframe.src = contentUrl;
            }
        }
    </script>
    @if (Model != null)
    {
        var lesson = db.Lessons.FirstOrDefault(l => l.LessonId == lessonId);
        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row">


                    <div class="col-lg-4 mt-5 mt-lg-0">
                        <div class="mb-5">
                            <h3 class="text-uppercase mb-4" style="letter-spacing: 5px;">@Model.First().chapter.ChapterTitle</h3>
                            <ul class="list-group list-group-flush">
                                @foreach (var item in Model)
                                {
                                    number++;

                                    <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                                        <a href="javascript:void(0);" onclick="getLessonId(@item.LessonId)" class="text-decoration-none h6 m-0">@number. @item.LessonName</a>

                                    </li>
                                    lessonId = item.LessonId;


                                }
                                <li class="list-group-item d-flex justify-content-between align-items-center px-0"></li>

                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <h5>@lesson.LessonName</h5>
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe id="videoIframe" class="embed-responsive-item" src="@lesson.ContentUrl" allowfullscreen>
                            </iframe>

                        </div>

                    </div>

                </div>
            </div>
        </div>
    }
    else
    {
        <span class="text-danger">Something's gone wrong :(</span>
    }

</body>